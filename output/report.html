
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CodeceptJS Test Report v3.7.5</title>
    <style>
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    line-height: 1.6;
    color: #333;
    background-color: #f5f5f5;
}

.report-header {
    background: #2c3e50;
    color: white;
    padding: 2rem 1rem;
    text-align: center;
}

.report-header h1 {
    margin-bottom: 0.5rem;
    font-size: 2.5rem;
}

.report-meta {
    font-size: 0.9rem;
    opacity: 0.8;
}

.report-meta span {
    margin: 0 1rem;
}

.report-content {
    max-width: 1200px;
    margin: 2rem auto;
    padding: 0 1rem;
}

.stats-section, .tests-section, .retries-section, .filters-section, .history-section, .system-info-section {
    background: white;
    margin-bottom: 2rem;
    border-radius: 8px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    overflow: hidden;
}

.stats-section h2, .tests-section h2, .retries-section h2, .filters-section h2, .history-section h2 {
    background: #34495e;
    color: white;
    padding: 1rem;
    margin: 0;
}

.stats-cards {
    display: flex;
    flex-wrap: wrap;
    gap: 1rem;
    padding: 1rem;
}

.stat-card {
    flex: 1;
    min-width: 150px;
    padding: 1rem;
    text-align: center;
    border-radius: 4px;
    color: white;
}

.stat-card.total { background: #3498db; }
.stat-card.passed { background: #27ae60; }
.stat-card.failed { background: #e74c3c; }
.stat-card.pending { background: #f39c12; }

.stat-card h3 {
    font-size: 0.9rem;
    margin-bottom: 0.5rem;
}

.stat-number {
    font-size: 2rem;
    font-weight: bold;
}

.pie-chart-container {
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 2rem 1rem;
    background: white;
    margin: 1rem 0;
    border-radius: 8px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

#statsChart {
    max-width: 100%;
    height: auto;
}

.test-item {
    border-bottom: 1px solid #eee;
    margin: 0;
}

.test-item:last-child {
    border-bottom: none;
}

.test-header {
    display: flex;
    align-items: center;
    padding: 1rem;
    cursor: pointer;
    transition: background-color 0.2s;
}

.test-header:hover {
    background-color: #f8f9fa;
}

.test-info {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: 0.25rem;
}

.test-meta-line {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-size: 0.9rem;
}

.test-status {
    font-size: 1.2rem;
    margin-right: 0.5rem;
}

.test-status.passed { color: #27ae60; }
.test-status.failed { color: #e74c3c; }
.test-status.pending { color: #f39c12; }
.test-status.skipped { color: #95a5a6; }

.test-title {
    font-size: 1.1rem;
    font-weight: 500;
    margin: 0;
}

.test-feature {
    background: #ecf0f1;
    padding: 0.25rem 0.5rem;
    border-radius: 4px;
    font-size: 0.8rem;
    color: #34495e;
}

.test-uid {
    background: #e8f4fd;
    padding: 0.25rem 0.5rem;
    border-radius: 4px;
    font-size: 0.7rem;
    color: #2980b9;
    font-family: monospace;
}

.retry-badge {
    background: #f39c12;
    color: white;
    padding: 0.25rem 0.5rem;
    border-radius: 4px;
    font-size: 0.7rem;
    font-weight: bold;
}

.test-duration {
    font-size: 0.8rem;
    color: #7f8c8d;
}

.test-details {
    display: none;
    padding: 1rem;
    background: #f8f9fa;
    border-top: 1px solid #e9ecef;
}

.error-message {
    background: #fee;
    border: 1px solid #fcc;
    border-radius: 4px;
    padding: 1rem;
    margin-bottom: 1rem;
}

.error-message pre {
    color: #c0392b;
    font-family: 'Courier New', monospace;
    font-size: 0.9rem;
    white-space: pre-wrap;
    word-wrap: break-word;
}

.steps-section, .artifacts-section, .hooks-section {
    margin-top: 1rem;
}

.steps-section h4, .artifacts-section h4, .hooks-section h4 {
    color: #34495e;
    margin-bottom: 0.5rem;
    font-size: 1rem;
}

.hook-item {
    display: flex;
    align-items: center;
    padding: 0.5rem 0;
    border-bottom: 1px solid #ecf0f1;
}

.hook-item:last-child {
    border-bottom: none;
}

.hook-status {
    margin-right: 0.5rem;
}

.hook-status.passed { color: #27ae60; }
.hook-status.failed { color: #e74c3c; }

.hook-title {
    flex: 1;
    font-family: 'Courier New', monospace;
    font-size: 0.9rem;
    font-weight: bold;
}

.hook-duration {
    font-size: 0.8rem;
    color: #7f8c8d;
}

.hook-error {
    width: 100%;
    margin-top: 0.5rem;
    padding: 0.5rem;
    background: #fee;
    border: 1px solid #fcc;
    border-radius: 4px;
    color: #c0392b;
    font-size: 0.8rem;
}

.step-item {
    display: flex;
    align-items: flex-start;
    padding: 0.5rem 0;
    border-bottom: 1px solid #ecf0f1;
    word-wrap: break-word;
    overflow-wrap: break-word;
    min-height: 2rem;
}

.step-item:last-child {
    border-bottom: none;
}

.step-status {
    margin-right: 0.5rem;
    flex-shrink: 0;
    margin-top: 0.2rem;
}

.step-status.success { color: #27ae60; }
.step-status.failed { color: #e74c3c; }

.step-title {
    flex: 1;
    font-family: 'Courier New', monospace;
    font-size: 0.9rem;
    word-wrap: break-word;
    overflow-wrap: break-word;
    line-height: 1.4;
    margin-right: 0.5rem;
    min-width: 0;
}

.step-duration {
    font-size: 0.8rem;
    color: #7f8c8d;
    flex-shrink: 0;
    margin-top: 0.2rem;
}

.artifacts-list {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
}

.artifact-image {
    max-width: 200px;
    max-height: 150px;
    border: 1px solid #ddd;
    border-radius: 4px;
    cursor: pointer;
    transition: transform 0.2s;
}

.artifact-image:hover {
    transform: scale(1.05);
}

.artifact-item {
    background: #ecf0f1;
    padding: 0.5rem;
    border-radius: 4px;
    font-size: 0.9rem;
}

.modal {
    display: none;
    position: fixed;
    z-index: 1000;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0,0,0,0.8);
    cursor: pointer;
}

.modal img {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    max-width: 90%;
    max-height: 90%;
    border-radius: 4px;
}

/* Enhanced screenshot styles for failed tests */
.screenshots-section {
    margin-top: 1rem;
}

.screenshots-section h4 {
    color: #e74c3c;
    margin-bottom: 0.75rem;
    font-size: 1rem;
    font-weight: 600;
}

.screenshots-list {
    display: flex;
    flex-direction: column;
    gap: 1rem;
}

.screenshot-container {
    border: 2px solid #e74c3c;
    border-radius: 8px;
    overflow: hidden;
    background: white;
    box-shadow: 0 4px 8px rgba(231, 76, 60, 0.1);
}

.screenshot-header {
    background: #e74c3c;
    color: white;
    padding: 0.5rem 1rem;
    font-size: 0.9rem;
    font-weight: 500;
}

.screenshot-label {
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.failure-screenshot {
    width: 100%;
    max-width: 100%;
    height: auto;
    display: block;
    cursor: pointer;
    transition: opacity 0.2s;
}

.failure-screenshot:hover {
    opacity: 0.9;
}

.other-artifacts-section {
    margin-top: 1rem;
}

/* Filter Controls */
.filter-controls {
    display: flex;
    flex-wrap: wrap;
    gap: 1rem;
    padding: 1rem;
    background: #f8f9fa;
}

.filter-group {
    display: flex;
    flex-direction: column;
    gap: 0.25rem;
}

.filter-group label {
    font-size: 0.9rem;
    font-weight: 500;
    color: #34495e;
}

.filter-group input,
.filter-group select {
    padding: 0.5rem;
    border: 1px solid #ddd;
    border-radius: 4px;
    font-size: 0.9rem;
    min-width: 150px;
}

.filter-group select[multiple] {
    height: auto;
    min-height: 80px;
}

.filter-controls button {
    padding: 0.5rem 1rem;
    background: #3498db;
    color: white;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    font-size: 0.9rem;
    align-self: flex-end;
}

.filter-controls button:hover {
    background: #2980b9;
}

/* Test Tags */
.tags-section, .metadata-section, .notes-section, .retry-section {
    margin-top: 1rem;
}

.tags-list {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
}

.test-tag {
    background: #3498db;
    color: white;
    padding: 0.25rem 0.5rem;
    border-radius: 12px;
    font-size: 0.8rem;
}

/* Metadata */
.metadata-list {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
}

.meta-item {
    padding: 0.5rem;
    background: #f8f9fa;
    border-radius: 4px;
    border-left: 3px solid #3498db;
}

.meta-key {
    font-weight: bold;
    color: #2c3e50;
}

.meta-value {
    color: #34495e;
    font-family: monospace;
}

/* Notes */
.notes-list {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
}

.note-item {
    padding: 0.5rem;
    border-radius: 4px;
    border-left: 3px solid #95a5a6;
}

.note-item.note-info {
    background: #e8f4fd;
    border-left-color: #3498db;
}

.note-item.note-warning {
    background: #fef9e7;
    border-left-color: #f39c12;
}

.note-item.note-error {
    background: #fee;
    border-left-color: #e74c3c;
}

.note-item.note-retry {
    background: #f0f8e8;
    border-left-color: #27ae60;
}

.note-type {
    font-weight: bold;
    text-transform: uppercase;
    font-size: 0.8rem;
}

/* Retry Information */
.retry-info {
    padding: 0.5rem;
    background: #fef9e7;
    border-radius: 4px;
    border-left: 3px solid #f39c12;
}

.retry-count {
    color: #d68910;
    font-weight: 500;
}

/* Retries Section */
.retry-item {
    padding: 1rem;
    margin-bottom: 1rem;
    border: 1px solid #f39c12;
    border-radius: 4px;
    background: #fef9e7;
}

.retry-item h4 {
    color: #d68910;
    margin-bottom: 0.5rem;
}

.retry-details {
    display: flex;
    gap: 1rem;
    align-items: center;
    font-size: 0.9rem;
}

.status-badge {
    padding: 0.25rem 0.5rem;
    border-radius: 4px;
    font-size: 0.8rem;
    font-weight: bold;
    text-transform: uppercase;
}

.status-badge.passed {
    background: #27ae60;
    color: white;
}

.status-badge.failed {
    background: #e74c3c;
    color: white;
}

.status-badge.pending {
    background: #f39c12;
    color: white;
}

/* History Chart */
.history-chart-container {
    padding: 2rem 1rem;
    display: flex;
    justify-content: center;
}

#historyChart {
    max-width: 100%;
    height: auto;
}

/* Hidden items for filtering */
.test-item.filtered-out {
    display: none !important;
}

/* System Info Section */
.system-info-section {
    background: white;
    margin-bottom: 2rem;
    border-radius: 8px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    overflow: hidden;
}

.system-info-header {
    background: #2c3e50;
    color: white;
    padding: 1rem;
    cursor: pointer;
    display: flex;
    justify-content: space-between;
    align-items: center;
    transition: background-color 0.2s;
}

.system-info-header:hover {
    background: #34495e;
}

.system-info-header h3 {
    margin: 0;
    font-size: 1.2rem;
}

.toggle-icon {
    font-size: 1rem;
    transition: transform 0.3s ease;
}

.toggle-icon.rotated {
    transform: rotate(-180deg);
}

.system-info-content {
    display: none;
    padding: 1.5rem;
    background: #f8f9fa;
    border-top: 1px solid #e9ecef;
}

.system-info-content.visible {
    display: block;
}

.system-info-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 1rem;
}

.info-item {
    padding: 0.75rem;
    background: white;
    border-radius: 6px;
    border-left: 4px solid #3498db;
    box-shadow: 0 1px 3px rgba(0,0,0,0.1);
}

.info-key {
    font-weight: bold;
    color: #2c3e50;
    display: inline-block;
    min-width: 100px;
}

.info-value {
    color: #34495e;
    font-family: 'Courier New', monospace;
    font-size: 0.9rem;
}

/* BDD/Gherkin specific styles */
.bdd-test {
    border-left: 4px solid #8e44ad;
}

.bdd-badge {
    background: #8e44ad;
    color: white;
    padding: 0.25rem 0.5rem;
    border-radius: 4px;
    font-size: 0.7rem;
    font-weight: bold;
}

.bdd-feature-section {
    margin-top: 1rem;
    padding: 1rem;
    background: #f8f9fa;
    border-left: 4px solid #8e44ad;
    border-radius: 4px;
}

.feature-name {
    font-weight: bold;
    font-size: 1.1rem;
    color: #8e44ad;
    margin-bottom: 0.5rem;
}

.feature-description {
    color: #34495e;
    font-style: italic;
    margin: 0.5rem 0;
    padding: 0.5rem;
    background: white;
    border-radius: 4px;
}

.feature-file {
    font-size: 0.8rem;
    color: #7f8c8d;
    margin-top: 0.5rem;
}

.feature-tags {
    display: flex;
    flex-wrap: wrap;
    gap: 0.25rem;
    margin: 0.5rem 0;
}

.feature-tag {
    background: #8e44ad;
    color: white;
    padding: 0.2rem 0.4rem;
    border-radius: 8px;
    font-size: 0.7rem;
}

.bdd-steps-section {
    margin-top: 1rem;
}

.bdd-steps-section h4 {
    color: #8e44ad;
    margin-bottom: 0.5rem;
    font-size: 1rem;
}

.bdd-step-item {
    display: flex;
    align-items: flex-start;
    padding: 0.5rem 0;
    border-bottom: 1px solid #ecf0f1;
    font-family: 'Segoe UI', sans-serif;
    word-wrap: break-word;
    overflow-wrap: break-word;
    min-height: 2rem;
}

.bdd-step-item:last-child {
    border-bottom: none;
}

.bdd-keyword {
    font-weight: bold;
    color: #8e44ad;
    margin-right: 0.5rem;
    min-width: 60px;
    text-align: left;
    flex-shrink: 0;
}

.bdd-step-text {
    flex: 1;
    color: #2c3e50;
    margin-right: 0.5rem;
    word-wrap: break-word;
    overflow-wrap: break-word;
    line-height: 1.4;
    min-width: 0;
}

.step-comment {
    width: 100%;
    margin-top: 0.5rem;
    padding: 0.5rem;
    background: #f8f9fa;
    border-left: 3px solid #8e44ad;
    font-style: italic;
    color: #6c757d;
    word-wrap: break-word;
    overflow-wrap: break-word;
    line-height: 1.4;
}

@media (max-width: 768px) {
    .stats-cards {
        flex-direction: column;
    }
    
    .test-header {
        flex-direction: column;
        align-items: stretch;
        gap: 0.5rem;
    }
    
    .test-feature, .test-duration {
        align-self: flex-start;
    }
}
    </style>
</head>
<body>
    <header class="report-header">
        <h1>CodeceptJS Test Report v3.7.5</h1>
        <div class="report-meta">
            <span>Generated: 2025-12-15T20:52:38.723Z</span>
            <span>Duration: 30.49s</span>
        </div>
    </header>

    <main class="report-content">
        
      <section class="system-info-section">
        <div class="system-info-header" onclick="toggleSystemInfo()">
          <h3>Environment Information</h3>
          <span class="toggle-icon">‚ñº</span>
        </div>
        <div class="system-info-content" id="systemInfoContent">
          <div class="system-info-grid">
            <div class="info-item"><span class="info-key">Node.js:</span> <span class="info-value">22.17.1</span></div><div class="info-item"><span class="info-key">OS:</span> <span class="info-value">macOS 15.6</span></div><div class="info-item"><span class="info-key">CPU:</span> <span class="info-value">(8) arm64 Apple M2</span></div><div class="info-item"><span class="info-key">Chrome:</span> <span class="info-value">143.0.7499.109</span></div><div class="info-item"><span class="info-key">Edge:</span> <span class="info-value">Not Found</span></div><div class="info-item"><span class="info-key">Safari:</span> <span class="info-value">18.6</span></div><div class="info-item"><span class="info-key">Playwright Browsers:</span> <span class="info-value">chromium: 143.0.7499.4, firefox: 144.0.2, webkit: 26.0</span></div>
          </div>
        </div>
      </section>
    

        <section class="stats-section">
            <h2>Test Statistics</h2>
            
      <div class="stats-cards">
        <div class="stat-card total">
          <h3>Total</h3>
          <span class="stat-number">7</span>
        </div>
        <div class="stat-card passed">
          <h3>Passed</h3>
          <span class="stat-number">4</span>
        </div>
        <div class="stat-card failed">
          <h3>Failed</h3>
          <span class="stat-number">3</span>
        </div>
        <div class="stat-card pending">
          <h3>Pending</h3>
          <span class="stat-number">0</span>
        </div>
      </div>
      <div class="pie-chart-container">
        <canvas id="statsChart" width="300" height="300"></canvas>
        <script>
          // Pie chart data will be rendered by JavaScript
          window.chartData = {
            passed: 4,
            failed: 3,
            pending: 0
          };
        </script>
      </div>
    
        </section>

        <section class="history-section" style="display: none;">
            <h2>Test History</h2>
            <div class="history-chart-container">
                <canvas id="historyChart" width="800" height="300"></canvas>
            </div>
        </section>

        <section class="filters-section">
            <h2>Filters</h2>
            <div class="filter-controls">
                <div class="filter-group">
                    <label>Status:</label>
                    <select id="statusFilter" multiple>
                        <option value="passed">Passed</option>
                        <option value="failed">Failed</option>
                        <option value="pending">Pending</option>
                        <option value="skipped">Skipped</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label>Feature:</label>
                    <input type="text" id="featureFilter" placeholder="Filter by feature...">
                </div>
                <div class="filter-group">
                    <label>Tags:</label>
                    <input type="text" id="tagFilter" placeholder="Filter by tags...">
                </div>
                <div class="filter-group">
                    <label>Retries:</label>
                    <select id="retryFilter">
                        <option value="all">All</option>
                        <option value="retried">With Retries</option>
                        <option value="no-retries">No Retries</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label>Test Type:</label>
                    <select id="typeFilter">
                        <option value="all">All</option>
                        <option value="bdd">BDD/Gherkin</option>
                        <option value="regular">Regular</option>
                    </select>
                </div>
                <button onclick="resetFilters()">Reset Filters</button>
            </div>
        </section>

        <section class="tests-section">
            <h2>Test Results</h2>
            <div class="tests-container">
                
        <div class="test-item passed" id="test-aabb4cd8" data-feature="Auth" data-status="passed" data-tags="" data-retries="0" data-type="regular">
          <div class="test-header" onclick="toggleTestDetails('test-aabb4cd8')">
            <span class="test-status passed">‚óè</span>
            <div class="test-info">
              <h3 class="test-title">Signup/Login page opens</h3>
              <div class="test-meta-line">
                <span class="test-feature">Auth</span>
                <span class="test-uid">+mCaALdsgHUN84chirY4sdVqQ80xb7U8kgvykWTBC+</span>
                <span class="test-duration">0ms</span>
                
                
              </div>
            </div>
          </div>
          <div class="test-details" id="details-test-aabb4cd8">
            
            
            
            
      <div class="metadata-section">
        <h4>Metadata:</h4>
        <div class="metadata-list"><div class="meta-item"><span class="meta-key">conditionalRetries:</span> <span class="meta-value">3</span></div><div class="meta-item"><span class="meta-key">browser:</span> <span class="meta-value">chromium</span></div><div class="meta-item"><span class="meta-key">browserVersion:</span> <span class="meta-value">143.0.7499.4</span></div><div class="meta-item"><span class="meta-key">windowSize:</span> <span class="meta-value">1280x720</span></div></div>
      </div>
    
            
            
            
            
      <div class="steps-section">
        <h4>Steps:</h4>
        <div class="steps-list">
        <div class="step-item success">
          <span class="step-status success">‚óè</span>
          <span class="step-title">I.amOnPage("/")</span>
          <span class="step-duration">2.48s</span>
        </div>
      
        <div class="step-item success">
          <span class="step-status success">‚óè</span>
          <span class="step-title">I.click("Signup / Login")</span>
          <span class="step-duration">1.23s</span>
        </div>
      
        <div class="step-item success">
          <span class="step-status success">‚óè</span>
          <span class="step-title">I.see("Login to your account")</span>
          <span class="step-duration">7ms</span>
        </div>
      
        <div class="step-item success">
          <span class="step-status success">‚óè</span>
          <span class="step-title">I.see("New User Signup!")</span>
          <span class="step-duration">1ms</span>
        </div>
      </div>
      </div>
    
            
          </div>
        </div>
      
        <div class="test-item passed" id="test-3384ca43" data-feature="Auth" data-status="passed" data-tags="" data-retries="0" data-type="regular">
          <div class="test-header" onclick="toggleTestDetails('test-3384ca43')">
            <span class="test-status passed">‚óè</span>
            <div class="test-info">
              <h3 class="test-title">Login shows error for invalid credentials</h3>
              <div class="test-meta-line">
                <span class="test-feature">Auth</span>
                <span class="test-uid">9WlzOnlYVj4DD8NBYO1uYCb0IEw7z7l75wQFYB2bes</span>
                <span class="test-duration">0ms</span>
                
                
              </div>
            </div>
          </div>
          <div class="test-details" id="details-test-3384ca43">
            
            
            
            
      <div class="metadata-section">
        <h4>Metadata:</h4>
        <div class="metadata-list"><div class="meta-item"><span class="meta-key">conditionalRetries:</span> <span class="meta-value">3</span></div><div class="meta-item"><span class="meta-key">browser:</span> <span class="meta-value">chromium</span></div><div class="meta-item"><span class="meta-key">browserVersion:</span> <span class="meta-value">143.0.7499.4</span></div><div class="meta-item"><span class="meta-key">windowSize:</span> <span class="meta-value">1280x720</span></div></div>
      </div>
    
            
            
            
            
      <div class="steps-section">
        <h4>Steps:</h4>
        <div class="steps-list">
        <div class="step-item success">
          <span class="step-status success">‚óè</span>
          <span class="step-title">I.amOnPage("/")</span>
          <span class="step-duration">1.49s</span>
        </div>
      
        <div class="step-item success">
          <span class="step-status success">‚óè</span>
          <span class="step-title">I.click("Signup / Login")</span>
          <span class="step-duration">606ms</span>
        </div>
      
        <div class="step-item success">
          <span class="step-status success">‚óè</span>
          <span class="step-title">I.fillField("input[data-qa=\"login-email\"]", "fake_email_otus@example.com")</span>
          <span class="step-duration">590ms</span>
        </div>
      
        <div class="step-item success">
          <span class="step-status success">‚óè</span>
          <span class="step-title">I.fillField("input[data-qa=\"login-password\"]", "wrong_password")</span>
          <span class="step-duration">428ms</span>
        </div>
      
        <div class="step-item success">
          <span class="step-status success">‚óè</span>
          <span class="step-title">I.click("button[data-qa=\"login-button\"]")</span>
          <span class="step-duration">480ms</span>
        </div>
      
        <div class="step-item success">
          <span class="step-status success">‚óè</span>
          <span class="step-title">I.see("Your email or password is incorrect!")</span>
          <span class="step-duration">8ms</span>
        </div>
      </div>
      </div>
    
            
          </div>
        </div>
      
        <div class="test-item failed" id="test-d97b7f07" data-feature="Products" data-status="failed" data-tags="" data-retries="0" data-type="regular">
          <div class="test-header" onclick="toggleTestDetails('test-d97b7f07')">
            <span class="test-status failed">‚óè</span>
            <div class="test-info">
              <h3 class="test-title">Products page opens</h3>
              <div class="test-meta-line">
                <span class="test-feature">Products</span>
                <span class="test-uid">vpG4icdL_qlkF3EI1UPMb5iyOwXDf0gg7RV7sTrf0j</span>
                <span class="test-duration">0ms</span>
                
                
              </div>
            </div>
          </div>
          <div class="test-details" id="details-test-d97b7f07">
            <div class="error-message"><pre>expected web application to include &quot;All Products&quot;

Stack trace:
‚óØ File: file:///Users/marchel/Desktop/otus-qa-js/codecept/tests/products_test.ts

‚óØ Scenario Steps:
‚úñ I.see(&quot;All Products&quot;) at ProductsPage.seePage (./codecept/pages/ProductsPage.ts:3:7)
‚úî I.click(&quot;Products&quot;) at HomePage.goToProducts (./codecept/pages/HomePage.ts:16:7)
‚úî I.amOnPage(&quot;/&quot;) at HomePage.open (./codecept/pages/HomePage.ts:3:7)

‚óØ Artifacts:
- screenshot: /Users/marchel/Desktop/otus-qa-js/output/Products_page_opens.failed.png

‚óØ Metadata:
- browser: chromium
- browserVersion: 143.0.7499.4
- windowSize: 1280x720</pre></div>
            
            
            
      <div class="metadata-section">
        <h4>Metadata:</h4>
        <div class="metadata-list"><div class="meta-item"><span class="meta-key">conditionalRetries:</span> <span class="meta-value">3</span></div><div class="meta-item"><span class="meta-key">browser:</span> <span class="meta-value">chromium</span></div><div class="meta-item"><span class="meta-key">browserVersion:</span> <span class="meta-value">143.0.7499.4</span></div><div class="meta-item"><span class="meta-key">windowSize:</span> <span class="meta-value">1280x720</span></div></div>
      </div>
    
            
            
            
            
      <div class="steps-section">
        <h4>Steps:</h4>
        <div class="steps-list">
        <div class="step-item success">
          <span class="step-status success">‚óè</span>
          <span class="step-title">I.amOnPage("/")</span>
          <span class="step-duration">1.10s</span>
        </div>
      
        <div class="step-item success">
          <span class="step-status success">‚óè</span>
          <span class="step-title">I.click("Products")</span>
          <span class="step-duration">3.82s</span>
        </div>
      
        <div class="step-item success">
          <span class="step-status success">‚óè</span>
          <span class="step-title">I.see("All Products")</span>
          <span class="step-duration">3ms</span>
        </div>
      </div>
      </div>
    
            
      <div class="artifacts-section">
        
        <div class="screenshots-section">
          <h4>Screenshots:</h4>
          <div class="screenshots-list">
              <div class="screenshot-container">
                <div class="screenshot-header">
                  <span class="screenshot-label">üì∏ Products_page_opens.failed.png</span>
                </div>
                <img src="Products_page_opens.failed.png" alt="Test failure screenshot" class="failure-screenshot" onclick="openImageModal(this.src)"/>
              </div>
            </div>
        </div>
      
      </div>
    
          </div>
        </div>
      
        <div class="test-item failed" id="test-c687ad60" data-feature="Products" data-status="failed" data-tags="" data-retries="0" data-type="regular">
          <div class="test-header" onclick="toggleTestDetails('test-c687ad60')">
            <span class="test-status failed">‚óè</span>
            <div class="test-info">
              <h3 class="test-title">Search products works</h3>
              <div class="test-meta-line">
                <span class="test-feature">Products</span>
                <span class="test-uid">rDXxeh8Xg7JOtY+pyXcj4EHm4qf3+YMic3Fvqy1_hK</span>
                <span class="test-duration">0ms</span>
                
                
              </div>
            </div>
          </div>
          <div class="test-details" id="details-test-c687ad60">
            <div class="error-message"><pre>expected web application to include &quot;Searched Products&quot;

Stack trace:
‚óØ File: file:///Users/marchel/Desktop/otus-qa-js/codecept/tests/products_test.ts

‚óØ Scenario Steps:
‚úñ I.see(&quot;Searched Products&quot;) at ProductsPage.seeSearchedProducts (./codecept/pages/ProductsPage.ts:12:7)
‚úî I.click(&quot;#submit_search&quot;) at ProductsPage.search (./codecept/pages/ProductsPage.ts:8:7)
‚úî I.fillField(&quot;#search_product&quot;, &quot;Dress&quot;) at ProductsPage.search (./codecept/pages/ProductsPage.ts:7:7)
‚úî I.click(&quot;Products&quot;) at HomePage.goToProducts (./codecept/pages/HomePage.ts:16:7)
‚úî I.amOnPage(&quot;/&quot;) at HomePage.open (./codecept/pages/HomePage.ts:3:7)

‚óØ Artifacts:
- screenshot: /Users/marchel/Desktop/otus-qa-js/output/Search_products_works.failed.png

‚óØ Metadata:
- browser: chromium
- browserVersion: 143.0.7499.4
- windowSize: 1280x720</pre></div>
            
            
            
      <div class="metadata-section">
        <h4>Metadata:</h4>
        <div class="metadata-list"><div class="meta-item"><span class="meta-key">conditionalRetries:</span> <span class="meta-value">3</span></div><div class="meta-item"><span class="meta-key">browser:</span> <span class="meta-value">chromium</span></div><div class="meta-item"><span class="meta-key">browserVersion:</span> <span class="meta-value">143.0.7499.4</span></div><div class="meta-item"><span class="meta-key">windowSize:</span> <span class="meta-value">1280x720</span></div></div>
      </div>
    
            
            
            
            
      <div class="steps-section">
        <h4>Steps:</h4>
        <div class="steps-list">
        <div class="step-item success">
          <span class="step-status success">‚óè</span>
          <span class="step-title">I.amOnPage("/")</span>
          <span class="step-duration">4.09s</span>
        </div>
      
        <div class="step-item success">
          <span class="step-status success">‚óè</span>
          <span class="step-title">I.click("Products")</span>
          <span class="step-duration">666ms</span>
        </div>
      
        <div class="step-item success">
          <span class="step-status success">‚óè</span>
          <span class="step-title">I.fillField("#search_product", "Dress")</span>
          <span class="step-duration">318ms</span>
        </div>
      
        <div class="step-item success">
          <span class="step-status success">‚óè</span>
          <span class="step-title">I.click("#submit_search")</span>
          <span class="step-duration">641ms</span>
        </div>
      
        <div class="step-item success">
          <span class="step-status success">‚óè</span>
          <span class="step-title">I.see("Searched Products")</span>
          <span class="step-duration">1ms</span>
        </div>
      </div>
      </div>
    
            
      <div class="artifacts-section">
        
        <div class="screenshots-section">
          <h4>Screenshots:</h4>
          <div class="screenshots-list">
              <div class="screenshot-container">
                <div class="screenshot-header">
                  <span class="screenshot-label">üì∏ Search_products_works.failed.png</span>
                </div>
                <img src="Search_products_works.failed.png" alt="Test failure screenshot" class="failure-screenshot" onclick="openImageModal(this.src)"/>
              </div>
            </div>
        </div>
      
      </div>
    
          </div>
        </div>
      
        <div class="test-item passed" id="test-834f1695" data-feature="Navigation" data-status="passed" data-tags="" data-retries="0" data-type="regular">
          <div class="test-header" onclick="toggleTestDetails('test-834f1695')">
            <span class="test-status passed">‚óè</span>
            <div class="test-info">
              <h3 class="test-title">Header navigation links are clickable</h3>
              <div class="test-meta-line">
                <span class="test-feature">Navigation</span>
                <span class="test-uid">GJM9zJ0Vve84qKvd1g9GqqpEcj1aPYo3RLJiinSd57</span>
                <span class="test-duration">0ms</span>
                
                
              </div>
            </div>
          </div>
          <div class="test-details" id="details-test-834f1695">
            
            
            
            
      <div class="metadata-section">
        <h4>Metadata:</h4>
        <div class="metadata-list"><div class="meta-item"><span class="meta-key">conditionalRetries:</span> <span class="meta-value">3</span></div><div class="meta-item"><span class="meta-key">browser:</span> <span class="meta-value">chromium</span></div><div class="meta-item"><span class="meta-key">browserVersion:</span> <span class="meta-value">143.0.7499.4</span></div><div class="meta-item"><span class="meta-key">windowSize:</span> <span class="meta-value">1280x720</span></div></div>
      </div>
    
            
            
            
            
      <div class="steps-section">
        <h4>Steps:</h4>
        <div class="steps-list">
        <div class="step-item success">
          <span class="step-status success">‚óè</span>
          <span class="step-title">I.amOnPage("/")</span>
          <span class="step-duration">2.21s</span>
        </div>
      
        <div class="step-item success">
          <span class="step-status success">‚óè</span>
          <span class="step-title">I.see("Products")</span>
          <span class="step-duration">59ms</span>
        </div>
      
        <div class="step-item success">
          <span class="step-status success">‚óè</span>
          <span class="step-title">I.see("Signup / Login")</span>
          <span class="step-duration">2ms</span>
        </div>
      
        <div class="step-item success">
          <span class="step-status success">‚óè</span>
          <span class="step-title">I.see("Contact us")</span>
          <span class="step-duration">1ms</span>
        </div>
      </div>
      </div>
    
            
          </div>
        </div>
      
        <div class="test-item passed" id="test-8b9b8d37" data-feature="Home" data-status="passed" data-tags="" data-retries="0" data-type="regular">
          <div class="test-header" onclick="toggleTestDetails('test-8b9b8d37')">
            <span class="test-status passed">‚óè</span>
            <div class="test-info">
              <h3 class="test-title">Home page opens</h3>
              <div class="test-meta-line">
                <span class="test-feature">Home</span>
                <span class="test-uid">ptzr2j2Ggl71qb3S2oNksCkIkv4OLoDXn+vwUpBAzm</span>
                <span class="test-duration">0ms</span>
                
                
              </div>
            </div>
          </div>
          <div class="test-details" id="details-test-8b9b8d37">
            
            
            
            
      <div class="metadata-section">
        <h4>Metadata:</h4>
        <div class="metadata-list"><div class="meta-item"><span class="meta-key">conditionalRetries:</span> <span class="meta-value">3</span></div><div class="meta-item"><span class="meta-key">browser:</span> <span class="meta-value">chromium</span></div><div class="meta-item"><span class="meta-key">browserVersion:</span> <span class="meta-value">143.0.7499.4</span></div><div class="meta-item"><span class="meta-key">windowSize:</span> <span class="meta-value">1280x720</span></div></div>
      </div>
    
            
            
            
            
      <div class="steps-section">
        <h4>Steps:</h4>
        <div class="steps-list">
        <div class="step-item success">
          <span class="step-status success">‚óè</span>
          <span class="step-title">I.amOnPage("/")</span>
          <span class="step-duration">1.49s</span>
        </div>
      
        <div class="step-item success">
          <span class="step-status success">‚óè</span>
          <span class="step-title">I.seeElement("header")</span>
          <span class="step-duration">51ms</span>
        </div>
      
        <div class="step-item success">
          <span class="step-status success">‚óè</span>
          <span class="step-title">I.see("Home")</span>
          <span class="step-duration">2ms</span>
        </div>
      </div>
      </div>
    
            
          </div>
        </div>
      
        <div class="test-item failed" id="test-bdbfa882" data-feature="Contact Us" data-status="failed" data-tags="" data-retries="0" data-type="regular">
          <div class="test-header" onclick="toggleTestDetails('test-bdbfa882')">
            <span class="test-status failed">‚óè</span>
            <div class="test-info">
              <h3 class="test-title">Contact us page opens and form is fillable</h3>
              <div class="test-meta-line">
                <span class="test-feature">Contact Us</span>
                <span class="test-uid">nJpBB3hAqcOan7DWm4HbcbPmlUXsiRShzG8BQMpqtZ</span>
                <span class="test-duration">0ms</span>
                
                
              </div>
            </div>
          </div>
          <div class="test-details" id="details-test-bdbfa882">
            <div class="error-message"><pre>expected web application to include &quot;Get In Touch&quot;

Stack trace:
‚óØ File: file:///Users/marchel/Desktop/otus-qa-js/codecept/tests/contact_test.ts

‚óØ Scenario Steps:
‚úñ I.see(&quot;Get In Touch&quot;) at ContactUsPage.seePage (./codecept/pages/ContactUsPage.ts:3:7)
‚úî I.click(&quot;Contact us&quot;) at HomePage.goToContactUs (./codecept/pages/HomePage.ts:20:7)
‚úî I.amOnPage(&quot;/&quot;) at HomePage.open (./codecept/pages/HomePage.ts:3:7)

‚óØ Artifacts:
- screenshot: /Users/marchel/Desktop/otus-qa-js/output/Contact_us_page_opens_and_form_is_fillable.failed.png

‚óØ Metadata:
- browser: chromium
- browserVersion: 143.0.7499.4
- windowSize: 1280x720</pre></div>
            
            
            
      <div class="metadata-section">
        <h4>Metadata:</h4>
        <div class="metadata-list"><div class="meta-item"><span class="meta-key">conditionalRetries:</span> <span class="meta-value">3</span></div><div class="meta-item"><span class="meta-key">browser:</span> <span class="meta-value">chromium</span></div><div class="meta-item"><span class="meta-key">browserVersion:</span> <span class="meta-value">143.0.7499.4</span></div><div class="meta-item"><span class="meta-key">windowSize:</span> <span class="meta-value">1280x720</span></div></div>
      </div>
    
            
            
            
            
      <div class="steps-section">
        <h4>Steps:</h4>
        <div class="steps-list">
        <div class="step-item success">
          <span class="step-status success">‚óè</span>
          <span class="step-title">I.amOnPage("/")</span>
          <span class="step-duration">1.26s</span>
        </div>
      
        <div class="step-item success">
          <span class="step-status success">‚óè</span>
          <span class="step-title">I.click("Contact us")</span>
          <span class="step-duration">766ms</span>
        </div>
      
        <div class="step-item success">
          <span class="step-status success">‚óè</span>
          <span class="step-title">I.see("Get In Touch")</span>
          <span class="step-duration">1ms</span>
        </div>
      
        <div class="step-item success">
          <span class="step-status success">‚óè</span>
          <span class="step-title">I.fillField("input[data-qa=\"name\"]", "Marchel")</span>
          <span class="step-duration">0ms</span>
        </div>
      
        <div class="step-item success">
          <span class="step-status success">‚óè</span>
          <span class="step-title">I.fillField("input[data-qa=\"email\"]", "marchel@example.com")</span>
          <span class="step-duration">0ms</span>
        </div>
      
        <div class="step-item success">
          <span class="step-status success">‚óè</span>
          <span class="step-title">I.fillField("input[data-qa=\"subject\"]", "OTUS HW")</span>
          <span class="step-duration">0ms</span>
        </div>
      
        <div class="step-item success">
          <span class="step-status success">‚óè</span>
          <span class="step-title">I.fillField("textarea[data-qa=\"message\"]", "Just testing Contact Us form")</span>
          <span class="step-duration">0ms</span>
        </div>
      
        <div class="step-item success">
          <span class="step-status success">‚óè</span>
          <span class="step-title">I.seeInField("input[data-qa=\"name\"]", "Marchel")</span>
          <span class="step-duration">0ms</span>
        </div>
      </div>
      </div>
    
            
      <div class="artifacts-section">
        
        <div class="screenshots-section">
          <h4>Screenshots:</h4>
          <div class="screenshots-list">
              <div class="screenshot-container">
                <div class="screenshot-header">
                  <span class="screenshot-label">üì∏ Contact_us_page_opens_and_form_is_fillable.failed.png</span>
                </div>
                <img src="Contact_us_page_opens_and_form_is_fillable.failed.png" alt="Test failure screenshot" class="failure-screenshot" onclick="openImageModal(this.src)"/>
              </div>
            </div>
        </div>
      
      </div>
    
          </div>
        </div>
      
            </div>
        </section>

        <section class="retries-section" style="display: block;">
            <h2>Test Retries</h2>
            <div class="retries-container">
                <p>No retried tests.</p>
            </div>
        </section>

    </main>

    <!-- Modal for images -->
    <div id="imageModal" class="modal" onclick="closeImageModal()">
        <img id="modalImage" src="" alt="Enlarged screenshot"/>
    </div>

    <script>
        window.testData = {
            stats: {"tests":7,"passes":4,"failures":3,"pending":0,"skipped":0,"duration":30487,"failedHooks":0},
            history: []
        };
    </script>
    <script>
function toggleTestDetails(testId) {
    const details = document.getElementById('details-' + testId);
    if (details.style.display === 'none' || details.style.display === '') {
        details.style.display = 'block';
    } else {
        details.style.display = 'none';
    }
}

function openImageModal(src) {
    const modal = document.getElementById('imageModal');
    const modalImg = document.getElementById('modalImage');
    modalImg.src = src;
    modal.style.display = 'block';
}

function closeImageModal() {
    const modal = document.getElementById('imageModal');
    modal.style.display = 'none';
}

function toggleSystemInfo() {
    const content = document.getElementById('systemInfoContent');
    const icon = document.querySelector('.toggle-icon');
    
    if (content.classList.contains('visible')) {
        content.classList.remove('visible');
        icon.classList.remove('rotated');
    } else {
        content.classList.add('visible');
        icon.classList.add('rotated');
    }
}

// Filter functionality
function applyFilters() {
    const statusFilter = Array.from(document.getElementById('statusFilter').selectedOptions).map(opt => opt.value);
    const featureFilter = document.getElementById('featureFilter').value.toLowerCase();
    const tagFilter = document.getElementById('tagFilter').value.toLowerCase();
    const retryFilter = document.getElementById('retryFilter').value;
    const typeFilter = document.getElementById('typeFilter').value;

    const testItems = document.querySelectorAll('.test-item');

    testItems.forEach(item => {
        let shouldShow = true;

        // Status filter
        if (statusFilter.length > 0) {
            const testStatus = item.dataset.status;
            if (!statusFilter.includes(testStatus)) {
                shouldShow = false;
            }
        }

        // Feature filter
        if (featureFilter && shouldShow) {
            const feature = (item.dataset.feature || '').toLowerCase();
            if (!feature.includes(featureFilter)) {
                shouldShow = false;
            }
        }

        // Tag filter
        if (tagFilter && shouldShow) {
            const tags = (item.dataset.tags || '').toLowerCase();
            if (!tags.includes(tagFilter)) {
                shouldShow = false;
            }
        }

        // Retry filter
        if (retryFilter !== 'all' && shouldShow) {
            const retries = parseInt(item.dataset.retries || '0');
            if (retryFilter === 'retried' && retries === 0) {
                shouldShow = false;
            } else if (retryFilter === 'no-retries' && retries > 0) {
                shouldShow = false;
            }
        }

        // Test type filter (BDD/Gherkin vs Regular)
        if (typeFilter !== 'all' && shouldShow) {
            const testType = item.dataset.type || 'regular';
            if (typeFilter !== testType) {
                shouldShow = false;
            }
        }

        if (shouldShow) {
            item.classList.remove('filtered-out');
        } else {
            item.classList.add('filtered-out');
        }
    });

    updateFilteredStats();
}

function resetFilters() {
    document.getElementById('statusFilter').selectedIndex = -1;
    document.getElementById('featureFilter').value = '';
    document.getElementById('tagFilter').value = '';
    document.getElementById('retryFilter').value = 'all';
    document.getElementById('typeFilter').value = 'all';
    
    document.querySelectorAll('.test-item').forEach(item => {
        item.classList.remove('filtered-out');
    });

    updateFilteredStats();
}

function updateFilteredStats() {
    const visibleTests = document.querySelectorAll('.test-item:not(.filtered-out)');
    const totalVisible = visibleTests.length;
    
    // Update the title to show filtered count
    const testsSection = document.querySelector('.tests-section h2');
    const totalTests = document.querySelectorAll('.test-item').length;
    
    if (totalVisible !== totalTests) {
        testsSection.textContent = 'Test Results (' + totalVisible + ' of ' + totalTests + ' shown)';
    } else {
        testsSection.textContent = 'Test Results';
    }
}

// Draw pie chart using canvas
function drawPieChart() {
    const canvas = document.getElementById('statsChart');
    if (!canvas) return;
    
    const ctx = canvas.getContext('2d');
    const data = window.chartData;
    
    if (!data) return;
    
    const centerX = canvas.width / 2;
    const centerY = canvas.height / 2;
    const radius = Math.min(centerX, centerY) - 20;
    
    const total = data.passed + data.failed + data.pending;
    if (total === 0) {
        // Draw empty circle for no tests
        ctx.strokeStyle = '#ddd';
        ctx.lineWidth = 2;
        ctx.beginPath();
        ctx.arc(centerX, centerY, radius, 0, 2 * Math.PI);
        ctx.stroke();
        ctx.fillStyle = '#888';
        ctx.font = '16px Arial';
        ctx.textAlign = 'center';
        ctx.fillText('No Tests', centerX, centerY);
        return;
    }
    
    let currentAngle = -Math.PI / 2; // Start from top
    
    // Calculate percentages
    const passedPercent = Math.round((data.passed / total) * 100);
    const failedPercent = Math.round((data.failed / total) * 100);
    const pendingPercent = Math.round((data.pending / total) * 100);
    
    // Draw passed segment
    if (data.passed > 0) {
        const angle = (data.passed / total) * 2 * Math.PI;
        ctx.beginPath();
        ctx.moveTo(centerX, centerY);
        ctx.arc(centerX, centerY, radius, currentAngle, currentAngle + angle);
        ctx.closePath();
        ctx.fillStyle = '#27ae60';
        ctx.fill();
        
        // Add percentage text on segment if significant enough
        if (passedPercent >= 10) {
            const textAngle = currentAngle + angle / 2;
            const textRadius = radius * 0.7;
            const textX = centerX + Math.cos(textAngle) * textRadius;
            const textY = centerY + Math.sin(textAngle) * textRadius;
            
            ctx.fillStyle = '#fff';
            ctx.font = 'bold 14px Arial';
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            ctx.fillText(passedPercent + '%', textX, textY);
        }
        
        currentAngle += angle;
    }
    
    // Draw failed segment
    if (data.failed > 0) {
        const angle = (data.failed / total) * 2 * Math.PI;
        ctx.beginPath();
        ctx.moveTo(centerX, centerY);
        ctx.arc(centerX, centerY, radius, currentAngle, currentAngle + angle);
        ctx.closePath();
        ctx.fillStyle = '#e74c3c';
        ctx.fill();
        
        // Add percentage text on segment if significant enough
        if (failedPercent >= 10) {
            const textAngle = currentAngle + angle / 2;
            const textRadius = radius * 0.7;
            const textX = centerX + Math.cos(textAngle) * textRadius;
            const textY = centerY + Math.sin(textAngle) * textRadius;
            
            ctx.fillStyle = '#fff';
            ctx.font = 'bold 14px Arial';
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            ctx.fillText(failedPercent + '%', textX, textY);
        }
        
        currentAngle += angle;
    }
    
    // Draw pending segment
    if (data.pending > 0) {
        const angle = (data.pending / total) * 2 * Math.PI;
        ctx.beginPath();
        ctx.moveTo(centerX, centerY);
        ctx.arc(centerX, centerY, radius, currentAngle, currentAngle + angle);
        ctx.closePath();
        ctx.fillStyle = '#f39c12';
        ctx.fill();
        
        // Add percentage text on segment if significant enough
        if (pendingPercent >= 10) {
            const textAngle = currentAngle + angle / 2;
            const textRadius = radius * 0.7;
            const textX = centerX + Math.cos(textAngle) * textRadius;
            const textY = centerY + Math.sin(textAngle) * textRadius;
            
            ctx.fillStyle = '#fff';
            ctx.font = 'bold 14px Arial';
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            ctx.fillText(pendingPercent + '%', textX, textY);
        }
    }
    
    // Add legend with percentages
    const legendY = centerY + radius + 40;
    ctx.font = '14px Arial';
    ctx.textAlign = 'left';
    ctx.textBaseline = 'alphabetic';
    
    let legendX = centerX - 150;
    
    // Passed legend
    ctx.fillStyle = '#27ae60';
    ctx.fillRect(legendX, legendY, 15, 15);
    ctx.fillStyle = '#333';
    ctx.fillText('Passed (' + data.passed + ' - ' + passedPercent + '%)', legendX + 20, legendY + 12);
    
    // Failed legend
    legendX += 130;
    ctx.fillStyle = '#e74c3c';
    ctx.fillRect(legendX, legendY, 15, 15);
    ctx.fillStyle = '#333';
    ctx.fillText('Failed (' + data.failed + ' - ' + failedPercent + '%)', legendX + 20, legendY + 12);
    
    // Pending legend
    if (data.pending > 0) {
        legendX += 120;
        ctx.fillStyle = '#f39c12';
        ctx.fillRect(legendX, legendY, 15, 15);
        ctx.fillStyle = '#333';
        ctx.fillText('Pending (' + data.pending + ' - ' + pendingPercent + '%)', legendX + 20, legendY + 12);
    }
}

// Draw history chart
function drawHistoryChart() {
    const canvas = document.getElementById('historyChart');
    
    if (!canvas || !window.testData || !window.testData.history || window.testData.history.length === 0) {
        return;
    }
    
    const ctx = canvas.getContext('2d');
    const history = window.testData.history.slice().reverse(); // Most recent last
    console.log('History chart - Total data points:', window.testData.history.length);
    console.log('History chart - Processing points:', history.length);
    console.log('History chart - Raw history data:', window.testData.history);
    console.log('History chart - Reversed history:', history);
    
    const padding = 60;
    const bottomPadding = 80; // Extra space for timestamps
    const chartWidth = canvas.width - 2 * padding;
    const chartHeight = canvas.height - padding - bottomPadding;
    
    // Clear canvas
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    
    // Calculate success rates and max values
    const dataPoints = history.map((run, index) => {
        const total = run.stats.tests || 0;
        const passed = run.stats.passes || 0;
        const failed = run.stats.failures || 0;
        const successRate = total > 0 ? (passed / total) * 100 : 0;
        const timestamp = new Date(run.timestamp);
        
        return {
            index,
            timestamp,
            total,
            passed,
            failed,
            successRate,
            duration: run.duration || 0,
            retries: run.retries || 0
        };
    });
    
    console.log('History chart - Data points created:', dataPoints.length);
    console.log('History chart - Data points:', dataPoints);
    
    const maxTests = Math.max(...dataPoints.map(d => d.total));
    const maxSuccessRate = 100;
    
    if (maxTests === 0) return;
    
    // Draw background
    ctx.fillStyle = '#fafafa';
    ctx.fillRect(padding, padding, chartWidth, chartHeight);
    
    // Draw axes
    ctx.strokeStyle = '#333';
    ctx.lineWidth = 2;
    ctx.beginPath();
    ctx.moveTo(padding, padding);
    ctx.lineTo(padding, padding + chartHeight);
    ctx.lineTo(padding + chartWidth, padding + chartHeight);
    ctx.stroke();
    
    // Draw grid lines
    ctx.strokeStyle = '#e0e0e0';
    ctx.lineWidth = 1;
    for (let i = 1; i <= 4; i++) {
        const y = padding + (chartHeight * i / 4);
        ctx.beginPath();
        ctx.moveTo(padding, y);
        ctx.lineTo(padding + chartWidth, y);
        ctx.stroke();
    }
    
    // Calculate positions
    const stepX = dataPoints.length > 1 ? chartWidth / (dataPoints.length - 1) : chartWidth / 2;
    
    // Draw success rate area chart
    ctx.fillStyle = 'rgba(39, 174, 96, 0.1)';
    ctx.strokeStyle = '#27ae60';
    ctx.lineWidth = 3;
    ctx.beginPath();
    
    dataPoints.forEach((point, index) => {
        const x = dataPoints.length === 1 ? padding + chartWidth / 2 : padding + (index * stepX);
        const y = padding + chartHeight - (point.successRate / maxSuccessRate) * chartHeight;
        
        if (index === 0) {
            ctx.moveTo(x, padding + chartHeight);
            ctx.lineTo(x, y);
        } else {
            ctx.lineTo(x, y);
        }
        
        point.x = x;
        point.y = y;
    });
    
    // Close the area
    if (dataPoints.length > 0) {
        const lastPoint = dataPoints[dataPoints.length - 1];
        ctx.lineTo(lastPoint.x, padding + chartHeight);
        ctx.closePath();
        ctx.fill();
    }
    
    // Draw success rate line
    ctx.strokeStyle = '#27ae60';
    ctx.lineWidth = 3;
    ctx.beginPath();
    dataPoints.forEach((point, index) => {
        if (index === 0) {
            ctx.moveTo(point.x, point.y);
        } else {
            ctx.lineTo(point.x, point.y);
        }
    });
    ctx.stroke();
    
    // Draw data points with enhanced styling
    dataPoints.forEach(point => {
        // Outer ring based on status
        const ringColor = point.failed > 0 ? '#e74c3c' : '#27ae60';
        ctx.strokeStyle = ringColor;
        ctx.lineWidth = 3;
        ctx.beginPath();
        ctx.arc(point.x, point.y, 8, 0, 2 * Math.PI);
        ctx.stroke();
        
        // Inner circle
        ctx.fillStyle = point.failed > 0 ? '#e74c3c' : '#27ae60';
        ctx.beginPath();
        ctx.arc(point.x, point.y, 5, 0, 2 * Math.PI);
        ctx.fill();
        
        // White center dot
        ctx.fillStyle = '#fff';
        ctx.beginPath();
        ctx.arc(point.x, point.y, 2, 0, 2 * Math.PI);
        ctx.fill();
    });
    
    // Y-axis labels (Success Rate %)
    ctx.fillStyle = '#666';
    ctx.font = '11px Arial';
    ctx.textAlign = 'right';
    for (let i = 0; i <= 4; i++) {
        const value = Math.round((maxSuccessRate * i) / 4);
        const y = padding + chartHeight - (chartHeight * i / 4);
        ctx.fillText(value + '%', padding - 10, y + 4);
    }
    
    // X-axis labels (Timestamps)
    ctx.textAlign = 'center';
    ctx.font = '10px Arial';
    dataPoints.forEach((point, index) => {
        const timeStr = point.timestamp.toLocaleTimeString('en-US', { 
            hour: '2-digit', 
            minute: '2-digit',
            hour12: false 
        });
        const dateStr = point.timestamp.toLocaleDateString('en-US', { 
            month: 'short', 
            day: 'numeric' 
        });
        
        console.log('Drawing label ' + index + ': ' + timeStr + ' at x=' + point.x);
        ctx.fillText(timeStr, point.x, padding + chartHeight + 15);
        ctx.fillText(dateStr, point.x, padding + chartHeight + 30);
    });
    
    // Enhanced legend with statistics
    const legendY = 25;
    ctx.font = '12px Arial';
    ctx.textAlign = 'left';
    
    // Success rate legend
    ctx.fillStyle = '#27ae60';
    ctx.fillRect(padding + 20, legendY, 15, 15);
    ctx.fillStyle = '#333';
    ctx.fillText('Success Rate', padding + 40, legendY + 12);
    
    // Current stats
    if (dataPoints.length > 0) {
        const latest = dataPoints[dataPoints.length - 1];
        const trend = dataPoints.length > 1 ? 
            (latest.successRate - dataPoints[dataPoints.length - 2].successRate) : 0;
        const trendIcon = trend > 0 ? '‚Üó' : trend < 0 ? '‚Üò' : '‚Üí';
        const trendColor = trend > 0 ? '#27ae60' : trend < 0 ? '#e74c3c' : '#666';
        
        ctx.fillStyle = '#666';
        ctx.fillText('Latest: ' + latest.successRate.toFixed(1) + '%', padding + 150, legendY + 12);
        
        ctx.fillStyle = trendColor;
        ctx.fillText(trendIcon + ' ' + Math.abs(trend).toFixed(1) + '%', padding + 240, legendY + 12);
    }
    
    // Chart title
    ctx.fillStyle = '#333';
    ctx.font = 'bold 14px Arial';
    ctx.textAlign = 'center';
    ctx.fillText('Test Success Rate History', canvas.width / 2, 20);
}

// Initialize charts and filters
document.addEventListener('DOMContentLoaded', function() {
    
    // Draw charts
    drawPieChart();
    drawHistoryChart();
    
    // Set up filter event listeners
    document.getElementById('statusFilter').addEventListener('change', applyFilters);
    document.getElementById('featureFilter').addEventListener('input', applyFilters);
    document.getElementById('tagFilter').addEventListener('input', applyFilters);
    document.getElementById('retryFilter').addEventListener('change', applyFilters);
    document.getElementById('typeFilter').addEventListener('change', applyFilters);
});
    </script>
</body>
</html>
    